<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Mon Aug 26 16:48:06 2013 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title></title>
</head>
<body>

<hr>

<p><b>NAME</b></p>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="90%">
<p><tt><b>wshc</b></tt> &minus; execute commands on multiple
remote machines</p></td>
</table>

<p><b>SYNOPSIS</b></p>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="90%">
<p><tt><b>wshc</b></tt> [<tt><b>&minus;o</b></tt> |
<tt><b>&minus;-stdout</b></tt>]
[<tt><b>&minus;-port</b></tt> <tt><i>port</i></tt>]
[<tt><b>&minus;u</b></tt> | <tt><b>&minus;-username</b></tt>
<tt><i>username</i></tt>] [<tt><b>&minus;p</b></tt> |
<tt><b>&minus;-password</b></tt>] [<tt><b>&minus;U</b></tt>
| <tt><b>&minus;-sudo-username</b></tt>
<tt><i>username</i></tt>] [<tt><b>&minus;P</b></tt> |
<tt><b>&minus;-sudo-password</b></tt>]
[<tt><b>&minus;t</b></tt> | <tt><b>&minus;-threads</b></tt>
<tt><i>threads</i></tt>] [<tt><b>&minus;h</b></tt> |
<tt><b>&minus;-hosts</b></tt> <tt><i>hosts</i></tt>]
[<tt><b>&minus;f</b></tt> | <tt><b>&minus;-file</b></tt>
<tt><i>filename</i></tt>] [<tt><b>&minus;r</b></tt> |
<tt><b>&minus;-range</b></tt> <tt><i>range_query</i></tt>]
[<tt><b>&minus;&minus;</b></tt>]
[<tt><i>command</i></tt>]</p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="81%">
<p><b>DESCRIPTION</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="90%">
<p><tt><b>wshc</b></tt> logs in to multiple hosts and
executes commands on them, in parallel. It&rsquo;s suitable
for executing commands on large numbers of hosts and
collating their results in a format that&rsquo;s easy to
read.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="5%"></td>
<td width="94%">
<p><b>Arguments</b></p></td>
</table>
<pre><b>       &minus;o</b> | <b>&minus;-stdout</b></pre>
<!-- INDENTATION -->

<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="87%">
<p>Display stdout. stdout is suppressed by
default.<tt><b><br>
&minus;-port</b></tt> <tt><i>port</i></tt><br>
Use a different port for ssh. By default, 22 is
used.<tt><b><br>
&minus;u</b></tt> | <tt><b>&minus;-username</b></tt>
<tt><i>username</i></tt><br>
Use a different username for SSH. By default, the username
of the current user is used.<tt><b><br>
&minus;p</b></tt> | <tt><b>&minus;-password</b></tt><br>
Prompt for the SSH password. If this argument is not
provided, then <tt><b>wshc</b></tt> will assume that you are
using pubkeys or an agent.<tt><b><br>
&minus;U</b></tt> | <tt><b>&minus;-sudo-username</b></tt>
<tt><i>username</i></tt><br>
Use sudo with the given username. If this option is not
provided, it&rsquo;s assumed that you&rsquo;re not going to
use sudo.<tt><b><br>
&minus;P</b></tt> |
<tt><b>&minus;-sudo-password</b></tt><br>
Prompt for sudo password. You <b>MUST</b> provide this
option if <tt><b>&minus;U</b></tt> is present.<tt><b><br>
&minus;t</b></tt> | <tt><b>&minus;-threads</b></tt>
<tt><i>threads</i></tt><br>
Spawn off <tt><i>threads</i></tt> number of threads. If this
flag is not given, then <tt><b>wshc</b></tt> will execute
sequentially.<tt><b><br>
&minus;h</b></tt> | <tt><b>&minus;-hosts</b></tt>
<tt><i>hosts</i></tt><br>
A comma separated list of hosts to ssh into.<tt><b><br>
&minus;f</b></tt> | <tt><b>&minus;-file</b></tt>
<tt><i>filename</i></tt><br>
A file to read a newline delimited set of hosts from. If
<tt><i>filename</i></tt> is executable, <tt><b>wshc</b></tt>
will execute the file and use the output as the list of
hosts.<tt><b><br>
&minus;r</b></tt> | <tt><b>&minus;-range</b></tt>
<tt><i>range_query</i></tt><br>
If <tt><b>wshc</b></tt> is built with range support,
<tt><i>range_query</i></tt> will be resolved with range</p>
<!-- INDENTATION -->
<p><b>Executing commands</b><br>
The remainder of the line will be executed on the remote
hosts. If the command takes arguments
<tt><b>&minus;&minus;</b></tt> should be provided before the
command. You ought not prefix the command with <tt>sudo</tt>
if you&rsquo;re planning on using <tt>sudo</tt><br>
Commands will be sent to <tt>wshd</tt> on the remote host
using a binary protocol over <tt>SSH</tt> The results will
be sent back to <tt><b>wshc</b></tt> and output to the user.
They&rsquo;re collated based on the output and the exit code
of the command. Normally stdout is suppressed so that
it&rsquo;s easier to see errors with commands.</p>
<!-- INDENTATION -->
<p><b>EXIT STATUS</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="90%">
<p>The <tt><b>wshc</b></tt> utility exits 0 on success, and
&gt;0 if an error occurs.</p></td>
</table>

<p><b>EXAMPLES</b></p>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="19%"></td>
<td width="80%">
<p><tt>wshc -h localhost -- ls -l</tt></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="90%">
<p>SSH&rsquo;s into localhost and runs ls -l. Won&rsquo;t
print anything but stderr (probably nothing).</p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="19%"></td>
<td width="80%">
<p><tt>wshc -h app01,app02,app03,app04,app05 -o -t 5 --
uname -a</tt></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="90%">
<p>SSH&rsquo;s into app01-5 with 5 threads, runs uname -a
and prints stdout.</p></td>
</table>

<p><b>SEE ALSO</b></p>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="90%">
<p><tt>wshd</tt>(1) <tt>wsh-add-hostkeys</tt>(1)</p></td>
</table>

<p><b>AUTHORS</b></p>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="90%">
<p>William Orr
&lang;<tt>will@worrbase.com</tt>&rang;</p></td>
</table>

<p><b>SECURITY CONSIDERATIONS</b></p>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="90%">
<p><tt><b>wshc</b></tt> prompts for your passwords and
stores them in memory. A page of memory is <tt>mlock</tt>(2)
and the password is kept encrypted in memory. With some
knowledge of the source and some time, it is possible to
fetch the password from memory and decrypt it.<br>
As soon as <tt><b>wshc</b></tt> is done with the password,
it is scrubbed from memory with <tt>memset_s</tt>(3)<br>
The input buffer is directed to the <tt>mlock</tt>(2) page
of memory with <tt>setvbuf</tt>(3) and also scrubbed with
<tt>memset_s</tt>(3) after use.</p>
<!-- INDENTATION -->
<p>BSD August 26, 2013 1</p></td>
</table>
<hr>
</body>
</html>
